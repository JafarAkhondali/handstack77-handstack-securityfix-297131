<?xml version="1.0" encoding="UTF-8"?>
<mapper xmlns="contract.xsd">
    <header>
        <datasource>DB01</datasource>
        <use>Y</use>
        <desc>문서양식 > 매입매출 > 거래처원장</desc>
    </header>
    <commands>
        <statement id="GD01" seq="0" use="Y" timeout="0" desc="문서 조회">
            <![CDATA[
SELECT DF.DocumentNo
    , DF.FormID
    , DF.Title
    , DF.SubstituteWorkerName
    , DF.SubscribeID
    , DF.SubscribeOwnerName
    , DF.SubscribeName
    , DF.SubscribePhoneNo
    , DF.SubscribeAddress
    , DF.SubscribeBusiness
    , DF.SubscribeSector
    , DF.Contents
    , DF.CreatorName
    , DF.Tags
    , DF.CreatedAt
FROM 
    DocumentForm DF
WHERE DF.DocumentNo = @DocumentNo
    AND DF.FormID = @FormID;
			]]>
            <param id="@DocumentNo" type="String" length="-1" value="NULL" />
            <param id="@FormID" type="String" length="-1" value="NULL" />
        </statement>

        <statement id="MD01" seq="0" use="Y" timeout="0" desc="문서 입력, 수정">
            <if test="(Flag == 'C')">
                <![CDATA[
INSERT INTO DocumentForm
(
    DocumentNo
    , FormID
    , Title
    , SubstituteWorkerName
    , SubscribeID
    , SubscribeOwnerName
    , SubscribeName
    , SubscribePhoneNo
    , SubscribeAddress
    , SubscribeBusiness
    , SubscribeSector
    , Contents
    , CreatorName
    , Tags
    , CreatedAt
) 
VALUES
(
    @DocumentNo
    , @FormID
    , @Title
    , @SubstituteWorkerName
    , @SubscribeID
    , @SubscribeOwnerName
    , @SubscribeName
    , @SubscribePhoneNo
    , @SubscribeAddress
    , @SubscribeBusiness
    , @SubscribeSector
    , @Contents
    , @CreatorName
    , @Tags
    , DATETIME('NOW', 'localtime')
);
		        ]]>
            </if>

            <if test="(Flag == 'U')">
                <![CDATA[
UPDATE DocumentForm SET FormID = @FormID
    , SubscribeSector = @SubscribeSector
    , Title = @Title
    , SubscribeID = @SubscribeID
    , SubscribeOwnerName = @SubscribeOwnerName
    , SubscribeName = @SubscribeName
    , SubscribePhoneNo = @SubscribePhoneNo
    , SubscribeAddress = @SubscribeAddress
    , SubscribeBusiness = @SubscribeBusiness
    , SubscribeSector = @SubscribeSector
    , Contents = @Contents
    , CreatorName = @CreatorName
    , Tags = @Tags
	, ModifiedAt = DATETIME('NOW', 'localtime')
WHERE DocumentNo = @DocumentNo;
		        ]]>
            </if>

            <![CDATA[
SELECT @DocumentNo AS DocumentNo;
		    ]]>
            <param id="@DocumentNo" type="String" length="36" value="NULL" />
            <param id="@FormID" type="String" length="10" value="NULL" />
            <param id="@Title" type="String" length="100" value="NULL" />
            <param id="@SubstituteWorkerName" type="String" length="50" value="NULL" />
            <param id="@SubscribeAddress" type="String" length="300" value="NULL" />
            <param id="@SubscribeBusiness" type="String" length="50" value="NULL" />
            <param id="@SubscribeID" type="String" length="20" value="NULL" />
            <param id="@SubscribeName" type="String" length="50" value="NULL" />
            <param id="@SubscribeOwnerName" type="String" length="50" value="NULL" />
            <param id="@SubscribePhoneNo" type="String" length="50" value="NULL" />
            <param id="@Contents" type="String" length="-1" value="NULL" />
            <param id="@SubscribeSector" type="String" length="50" value="NULL" />
            <param id="@CreatorName" type="String" length="50" value="NULL" />
            <param id="@Tags" type="String" length="200" value="NULL" />
        </statement>

        <statement id="DD01" seq="0" use="Y" timeout="0" desc="문서 삭제">
            <![CDATA[
DELETE FROM DocumentForm
WHERE DocumentNo = @DocumentNo;
			]]>
            <param id="@DocumentNo" type="String" length="-1" value="NULL" />
        </statement>
    </commands>
</mapper>