<?xml version="1.0" encoding="UTF-8"?>
<mapper xmlns="contract.xsd">
	<header>
		<datasource>DB01</datasource>
		<use>Y</use>
		<desc>게시판 Board 테이블 DDL 및 게시글 조회</desc>
	</header>
	<commands>
        <statement id="ZD01" seq="0" use="Y" timeout="0" desc="Board 테이블 DDL 및 초기 데이터 입력 적용">
            <![CDATA[

            ]]>
        </statement>
        
        <statement id="LD01" seq="0" use="Y" timeout="0" desc="분류, 기간, 제목을 기준으로 게시글 조회">
            <![CDATA[
SELECT B.ID
    , B.Category
    , B.Title
    , B.Author
    , B.DatePosted
    , '확인' AS EditPost
FROM Board B 
WHERE B.DatePosted BETWEEN @StartDate AND (@EndDate || '23:59:59')
    AND CASE WHEN @Category = '' THEN @Category ELSE B.Category END = @Category
    AND CASE WHEN @Title = '' THEN @Title ELSE B.Title END LIKE ('%' || @Title || '%')
ORDER BY (CASE @Sequence WHEN 'ASC' THEN CASE @OrderBy 
        WHEN 'ID' THEN ID 
        WHEN 'Category' THEN Category 
        WHEN 'Title' THEN Title 
        WHEN 'Author' THEN Author END
    END) ASC
    , (CASE @Sequence WHEN 'DESC' THEN CASE @OrderBy 
        WHEN 'ID' THEN ID 
        WHEN 'Category' THEN Category 
        WHEN 'Title' THEN Title 
        WHEN 'Author' THEN Author END
    END) DESC;
			]]>
            <param id="@Category" type="String" length="-1" value="" />
            <param id="@Title" type="String" length="-1" value="" />
            <param id="@StartDate" type="String" length="-1" value="" />
            <param id="@EndDate" type="String" length="-1" value="" />
            <param id="@OrderBy" type="String" length="-1" value="" />
            <param id="@Sequence" type="String" length="-1" value="" />
        </statement>
	</commands>
</mapper>